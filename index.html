<!DOCTYPE html>
<html>
<head>
<title>Billing Calculator</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: linear-gradient(135deg, #f7f9fc, #eef3f8);
}

/* Header */
.header {
  text-align: center;
  margin-bottom: 10px;
}
.header h2 {
  margin: 5px 0;
  color: #2c3e50;
}
.header .icon {
  font-size: 34px;
}

/* Inputs & buttons */
input {
  font-size: 18px;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #bbb;
  width: 160px;
}

button {
  font-size: 15px;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin: 4px;
}

.add { background: #3498db; color: white; }
.print { background: #27ae60; color: white; }
.bills { background: #8e44ad; color: white; }
.config { background: #e67e22; color: white; }

button:hover { opacity: 0.9; }

/* Table (receipt look) */
table {
  width: 280px;
  margin: 15px auto;
  border-collapse: collapse;
  background: #fff;
}

td, th {
  border: 1px solid #000;
  padding: 6px;
  text-align: center;
}

tfoot th {
  font-weight: bold;
}

/* Footer */
.footer {
  text-align: center;
  margin-top: 10px;
  font-size: 13px;
  color: #555;
}

/* THERMAL PRINT (58mm / 80mm friendly) */
@media print {
  body {
    background: white;
    width: 80mm;
    margin: 0 auto;
  }
  button, input, a { display: none; }
}
</style>
</head>
<body>

<div class="header">
  <div class="icon">üìöüñäÔ∏è</div>
  <h2 id="shopName"></h2>
  <div id="shopAddress"></div>
</div>

<p style="text-align:center;">
<b>Bill No:</b> <span id="billNo"></span><br>
<b>Date:</b> <span id="billDate"></span>
</p>

<div style="text-align:center;">
<input type="number" id="priceInput" placeholder="Enter amount" autofocus>
<button class="add" onclick="addPrice()">Add</button>
</div>

<table>
<thead>
<tr><th>Price</th></tr>
</thead>
<tbody id="priceTable"></tbody>
<tfoot>
<tr><th>Total ‚Çπ <span id="total">0.00</span></th></tr>
</tfoot>
</table>

<div style="text-align:center;">
<button class="print" onclick="printBill()">Print</button>
<a href="bills.html"><button class="bills">Today's Bills</button></a>
<a href="config.html"><button class="config">Config</button></a>
</div>

<div class="footer">
Thank you üôè ‚Äî Visit again!
</div>

<script>
let total = 0;
let prices = [];

let billNo = Number(localStorage.getItem("billNo") || 1);
document.getElementById("billNo").innerText = billNo;
document.getElementById("billDate").innerText = new Date().toLocaleString();

function loadConfig() {
  shopName.innerText = localStorage.getItem("shopName") || "My Stationery Shop";
  shopAddress.innerText = localStorage.getItem("shopAddress") || "";
}
loadConfig();

function addPrice() {
  const v = parseFloat(priceInput.value);
  if (isNaN(v)) return;
  prices.push(v);
  total += v;

  const r = document.createElement("tr");
  r.innerHTML = `<td>${v.toFixed(2)}</td>`;
  priceTable.appendChild(r);

  totalSpan.innerText = total.toFixed(2);
  priceInput.value = "";
}

priceInput.addEventListener("keydown", e => {
  if (e.key === "Enter") addPrice();
});

function printBill() {
  const bills = JSON.parse(localStorage.getItem("bills") || "[]");
  bills.push({
    billNo,
    date: new Date().toISOString(),
    prices,
    total
  });
  localStorage.setItem("bills", JSON.stringify(bills));
  localStorage.setItem("billNo", billNo + 1);
  window.print();
}

const totalSpan = document.getElementById("total");
</script>

</body>
</html>
