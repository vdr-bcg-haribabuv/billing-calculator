<!DOCTYPE html>
<html>
<head>
<title>Billing Calculator</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  background: linear-gradient(135deg, #f7f9fc, #eef3f8);
}

h2 {
  text-align: center;
  color: #2c3e50;
}

p {
  text-align: center;
  color: #555;
}

input {
  font-size: 18px;
  padding: 8px;
  border: 1px solid #bbb;
  border-radius: 6px;
  width: 180px;
}

button {
  font-size: 15px;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin: 4px;
}

/* Button colors */
button:hover { opacity: 0.9; }

button:nth-of-type(1) { background: #3498db; color: #fff; } /* Add */
button:nth-of-type(2) { background: #27ae60; color: #fff; } /* Print */
button:nth-of-type(3) { background: #8e44ad; color: #fff; } /* Bills */
button:nth-of-type(4) { background: #e67e22; color: #fff; } /* Config */

table {
  width: 300px;
  margin: 15px auto;
  border-collapse: collapse;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

td, th {
  border: 1px solid #ccc;
  padding: 6px;
  text-align: center;
}

tfoot th {
  background: #f2f6fa;
  font-weight: bold;
}

/* PRINT CLEAN */
@media print {
  body { background: white; }
  button, input, a { display: none; }
  table { box-shadow: none; }
}
</style>

</head>
<body>

<h2 id="shopName"></h2>
<p id="shopAddress"></p>

<p>
<b>Bill No:</b> <span id="billNo"></span><br>
<b>Date:</b> <span id="billDate"></span>
</p>

<div style="text-align:center;">
<input type="number" id="priceInput" placeholder="Enter amount" autofocus>
<button onclick="addPrice()">Add</button>
</div>

<table>
<thead>
<tr><th>Price</th></tr>
</thead>
<tbody id="priceTable"></tbody>
<tfoot>
<tr><th>Total: â‚¹<span id="total">0.00</span></th></tr>
</tfoot>
</table>

<div style="text-align:center;">
<button onclick="printBill()">Print Receipt</button>
<a href="bills.html"><button>Today's Bills</button></a>
<a href="config.html"><button>Config</button></a>
</div>

<script>
let total = 0;
let prices = [];

let billNo = Number(localStorage.getItem("billNo") || 1);
document.getElementById("billNo").innerText = billNo;
document.getElementById("billDate").innerText = new Date().toLocaleString();

function loadConfig() {
  document.getElementById("shopName").innerText =
    localStorage.getItem("shopName") || "My Shop";
  document.getElementById("shopAddress").innerText =
    localStorage.getItem("shopAddress") || "";
}
loadConfig();

function addPrice() {
  const input = document.getElementById("priceInput");
  const value = parseFloat(input.value);
  if (isNaN(value)) return;

  prices.push(value);
  total += value;

  const row = document.createElement("tr");
  row.innerHTML = `<td>${value.toFixed(2)}</td>`;
  document.getElementById("priceTable").appendChild(row);

  document.getElementById("total").innerText = total.toFixed(2);
  input.value = "";
  input.focus();
}

document.getElementById("priceInput").addEventListener("keydown", e => {
  if (e.key === "Enter") addPrice();
});

function printBill() {
  saveBill();
  window.print();
}

function saveBill() {
  const bills = JSON.parse(localStorage.getItem("bills") || "[]");
  bills.push({
    billNo: billNo,
    date: new Date().toISOString(),
    prices: prices,
    total: total
  });
  localStorage.setItem("bills", JSON.stringify(bills));
  localStorage.setItem("billNo", billNo + 1);
}
</script>

</body>
</html>
